{"ast":null,"code":"import { parseRating, parsePublicationYear, inferGenre, getEra } from './parseData';\nexport const calculateStats = (books, userName = 'Reader', year = null) => {\n  const stats = {\n    name: userName,\n    year: year,\n    totalBooks: books.length\n  };\n\n  // Parse all ratings\n  const ratings = books.map(b => parseRating(b.rating)).filter(r => r !== null);\n  if (ratings.length > 0) {\n    stats.avgRating = parseFloat((ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(2));\n    stats.fiveStarPct = parseFloat((ratings.filter(r => r === 5).length / ratings.length * 100).toFixed(1));\n    stats.fourPlusPct = parseFloat((ratings.filter(r => r >= 4).length / ratings.length * 100).toFixed(1));\n    stats.mostCommonRating = getMostCommon(ratings);\n\n    // Rating distribution\n    stats.ratingDistribution = {};\n    for (let i = 1; i <= 5; i++) {\n      const count = ratings.filter(r => r === i).length;\n      if (count > 0) stats.ratingDistribution[i] = count;\n    }\n\n    // Compare to Goodreads average\n    const validComparisons = books.filter(b => parseRating(b.rating) !== null && b.avgRating > 0);\n    if (validComparisons.length > 0) {\n      const diff = validComparisons.reduce((sum, b) => {\n        return sum + (parseRating(b.rating) - b.avgRating);\n      }, 0) / validComparisons.length;\n      stats.ratingVsGoodreads = parseFloat(diff.toFixed(2));\n      if (diff > 0.3) {\n        stats.ratingPersonality = \"Generous Reviewer\";\n      } else if (diff < -0.3) {\n        stats.ratingPersonality = \"Tough Critic\";\n      } else {\n        stats.ratingPersonality = \"Balanced Judge\";\n      }\n\n      // NEW: Advanced rating analysis\n      stats.ratingAnalysis = analyzeRatingBehavior(validComparisons);\n    }\n  }\n\n  // Publication year stats\n  const years = books.map(b => parsePublicationYear(b.datePublished)).filter(y => y !== null);\n  if (years.length > 0) {\n    stats.avgPubYear = Math.round(years.reduce((a, b) => a + b, 0) / years.length);\n    stats.oldestBookYear = Math.min(...years);\n    stats.newestBookYear = Math.max(...years);\n    stats.timeSpanYears = stats.newestBookYear - stats.oldestBookYear;\n\n    // Find oldest book\n    const oldestBook = books.find(b => parsePublicationYear(b.datePublished) === stats.oldestBookYear);\n    stats.oldestBookTitle = (oldestBook === null || oldestBook === void 0 ? void 0 : oldestBook.title) || 'Unknown';\n\n    // Era breakdown\n    const eras = years.map(getEra);\n    stats.favoriteEra = getMostCommon(eras);\n    stats.eraBreakdown = countOccurrences(eras);\n\n    // Time period counts\n    stats.books2020Plus = years.filter(y => y >= 2020).length;\n    stats.booksPre1900 = years.filter(y => y < 1900).length;\n    stats.booksAncient = years.filter(y => y < 500).length;\n\n    // Reading personality\n    const ancientPct = stats.booksPre1900 / years.length;\n    const recentPct = stats.books2020Plus / years.length;\n    if (ancientPct > 0.3) {\n      stats.readingPersonality = \"Time Traveler\";\n    } else if (recentPct > 0.7) {\n      stats.readingPersonality = \"Trend Chaser\";\n    } else {\n      stats.readingPersonality = \"Balanced Reader\";\n    }\n  }\n\n  // Author stats\n  const authors = books.map(b => b.author).filter(a => a);\n  if (authors.length > 0) {\n    stats.uniqueAuthors = new Set(authors).size;\n    stats.booksPerAuthor = parseFloat((authors.length / stats.uniqueAuthors).toFixed(2));\n    const authorCounts = countOccurrences(authors);\n    const topAuthor = Object.entries(authorCounts).sort((a, b) => b[1] - a[1])[0];\n    stats.topAuthorName = topAuthor[0];\n    stats.topAuthorCount = topAuthor[1];\n    if (authors.length >= 5) {\n      if (stats.booksPerAuthor >= 2.0) {\n        stats.authorLoyalty = \"Superfan\";\n      } else if (stats.booksPerAuthor < 1.2) {\n        stats.authorLoyalty = \"Explorer\";\n      } else {\n        stats.authorLoyalty = \"Balanced\";\n      }\n    }\n  }\n\n  // Genre stats\n  const genres = books.map(b => inferGenre(b.title));\n  stats.topGenre = getMostCommon(genres);\n  stats.genreBreakdown = countOccurrences(genres);\n  stats.genreDiversity = Object.keys(stats.genreBreakdown).length;\n\n  // Goodreads community average\n  const validAvgRatings = books.filter(b => b.avgRating > 0).map(b => b.avgRating);\n  if (validAvgRatings.length > 0) {\n    stats.goodreadsAvg = parseFloat((validAvgRatings.reduce((a, b) => a + b, 0) / validAvgRatings.length).toFixed(2));\n    if (stats.avgRating) {\n      const diff = Math.abs(stats.avgRating - stats.goodreadsAvg);\n      if (diff < 0.3) {\n        stats.tasteAlignment = \"Mainstream\";\n      } else if (stats.avgRating > stats.goodreadsAvg) {\n        stats.tasteAlignment = \"Optimist\";\n      } else {\n        stats.tasteAlignment = \"Contrarian\";\n      }\n    }\n  }\n  return stats;\n};\n\n// NEW: Analyze rating behavior in detail\nconst analyzeRatingBehavior = booksWithComparisons => {\n  const analysis = {};\n\n  // Books where user rated higher than Goodreads\n  const ratedHigher = booksWithComparisons.filter(b => {\n    const userRating = parseRating(b.rating);\n    return userRating > b.avgRating;\n  });\n\n  // Books where user rated lower than Goodreads\n  const ratedLower = booksWithComparisons.filter(b => {\n    const userRating = parseRating(b.rating);\n    return userRating < b.avgRating;\n  });\n\n  // Books rated exactly the same\n  const ratedSame = booksWithComparisons.filter(b => {\n    const userRating = parseRating(b.rating);\n    return Math.abs(userRating - b.avgRating) < 0.1;\n  });\n  analysis.ratedHigherCount = ratedHigher.length;\n  analysis.ratedLowerCount = ratedLower.length;\n  analysis.ratedSameCount = ratedSame.length;\n  analysis.ratedHigherPct = parseFloat((ratedHigher.length / booksWithComparisons.length * 100).toFixed(1));\n  analysis.ratedLowerPct = parseFloat((ratedLower.length / booksWithComparisons.length * 100).toFixed(1));\n\n  // Find biggest disagreements\n  const disagreements = booksWithComparisons.map(b => ({\n    title: b.title,\n    userRating: parseRating(b.rating),\n    avgRating: b.avgRating,\n    difference: parseRating(b.rating) - b.avgRating\n  }));\n\n  // Most loved (rated much higher than average)\n  const mostLoved = disagreements.filter(d => d.difference > 0).sort((a, b) => b.difference - a.difference).slice(0, 3);\n\n  // Most critical (rated much lower than average)\n  const mostCritical = disagreements.filter(d => d.difference < 0).sort((a, b) => a.difference - b.difference).slice(0, 3);\n  analysis.mostLoved = mostLoved;\n  analysis.mostCritical = mostCritical;\n\n  // Underrated gems (gave 5 stars, Goodreads average < 4.0)\n  const underratedGems = booksWithComparisons.filter(b => {\n    const userRating = parseRating(b.rating);\n    return userRating === 5 && b.avgRating < 4.0;\n  });\n  analysis.underratedGems = underratedGems.map(b => ({\n    title: b.title,\n    avgRating: b.avgRating\n  }));\n\n  // Overrated books (gave 1-2 stars, Goodreads average > 4.0)\n  const overratedBooks = booksWithComparisons.filter(b => {\n    const userRating = parseRating(b.rating);\n    return userRating <= 2 && b.avgRating > 4.0;\n  });\n  analysis.overratedBooks = overratedBooks.map(b => ({\n    title: b.title,\n    avgRating: b.avgRating,\n    userRating: parseRating(b.rating)\n  }));\n\n  // Rating consistency - standard deviation\n  const differences = disagreements.map(d => d.difference);\n  const avgDiff = differences.reduce((a, b) => a + b, 0) / differences.length;\n  const variance = differences.reduce((sum, diff) => sum + Math.pow(diff - avgDiff, 2), 0) / differences.length;\n  analysis.ratingStdDev = parseFloat(Math.sqrt(variance).toFixed(2));\n\n  // Determine consistency personality\n  if (analysis.ratingStdDev < 0.5) {\n    analysis.consistencyType = \"Predictable\";\n  } else if (analysis.ratingStdDev > 1.0) {\n    analysis.consistencyType = \"Unpredictable\";\n  } else {\n    analysis.consistencyType = \"Moderate\";\n  }\n\n  // Harsh on popular books?\n  const popularBooks = booksWithComparisons.filter(b => b.avgRating >= 4.2);\n  if (popularBooks.length > 0) {\n    const popularAvgDiff = popularBooks.reduce((sum, b) => {\n      return sum + (parseRating(b.rating) - b.avgRating);\n    }, 0) / popularBooks.length;\n    analysis.harshOnPopular = popularAvgDiff < -0.3;\n  }\n\n  // Champion of underdogs?\n  const unpopularBooks = booksWithComparisons.filter(b => b.avgRating < 3.8);\n  if (unpopularBooks.length > 0) {\n    const unpopularAvgDiff = unpopularBooks.reduce((sum, b) => {\n      return sum + (parseRating(b.rating) - b.avgRating);\n    }, 0) / unpopularBooks.length;\n    analysis.championOfUnderdogs = unpopularAvgDiff > 0.3;\n  }\n  return analysis;\n};\nconst getMostCommon = arr => {\n  var _Object$entries$sort$;\n  const counts = countOccurrences(arr);\n  return (_Object$entries$sort$ = Object.entries(counts).sort((a, b) => b[1] - a[1])[0]) === null || _Object$entries$sort$ === void 0 ? void 0 : _Object$entries$sort$[0];\n};\nconst countOccurrences = arr => {\n  return arr.reduce((acc, val) => {\n    acc[val] = (acc[val] || 0) + 1;\n    return acc;\n  }, {});\n};","map":{"version":3,"names":["parseRating","parsePublicationYear","inferGenre","getEra","calculateStats","books","userName","year","stats","name","totalBooks","length","ratings","map","b","rating","filter","r","avgRating","parseFloat","reduce","a","toFixed","fiveStarPct","fourPlusPct","mostCommonRating","getMostCommon","ratingDistribution","i","count","validComparisons","diff","sum","ratingVsGoodreads","ratingPersonality","ratingAnalysis","analyzeRatingBehavior","years","datePublished","y","avgPubYear","Math","round","oldestBookYear","min","newestBookYear","max","timeSpanYears","oldestBook","find","oldestBookTitle","title","eras","favoriteEra","eraBreakdown","countOccurrences","books2020Plus","booksPre1900","booksAncient","ancientPct","recentPct","readingPersonality","authors","author","uniqueAuthors","Set","size","booksPerAuthor","authorCounts","topAuthor","Object","entries","sort","topAuthorName","topAuthorCount","authorLoyalty","genres","topGenre","genreBreakdown","genreDiversity","keys","validAvgRatings","goodreadsAvg","abs","tasteAlignment","booksWithComparisons","analysis","ratedHigher","userRating","ratedLower","ratedSame","ratedHigherCount","ratedLowerCount","ratedSameCount","ratedHigherPct","ratedLowerPct","disagreements","difference","mostLoved","d","slice","mostCritical","underratedGems","overratedBooks","differences","avgDiff","variance","pow","ratingStdDev","sqrt","consistencyType","popularBooks","popularAvgDiff","harshOnPopular","unpopularBooks","unpopularAvgDiff","championOfUnderdogs","arr","_Object$entries$sort$","counts","acc","val"],"sources":["/Users/calebwoods/Desktop/reading-wrapped/src/utils/calculateStats.js"],"sourcesContent":["import { parseRating, parsePublicationYear, inferGenre, getEra } from './parseData';\n\nexport const calculateStats = (books, userName = 'Reader', year = null) => {\n    const stats = {\n        name: userName,\n        year: year,\n        totalBooks: books.length\n    };\n\n    // Parse all ratings\n    const ratings = books.map(b => parseRating(b.rating)).filter(r => r !== null);\n\n    if (ratings.length > 0) {\n        stats.avgRating = parseFloat((ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(2));\n        stats.fiveStarPct = parseFloat(((ratings.filter(r => r === 5).length / ratings.length) * 100).toFixed(1));\n        stats.fourPlusPct = parseFloat(((ratings.filter(r => r >= 4).length / ratings.length) * 100).toFixed(1));\n        stats.mostCommonRating = getMostCommon(ratings);\n\n        // Rating distribution\n        stats.ratingDistribution = {};\n        for (let i = 1; i <= 5; i++) {\n            const count = ratings.filter(r => r === i).length;\n            if (count > 0) stats.ratingDistribution[i] = count;\n        }\n\n        // Compare to Goodreads average\n        const validComparisons = books.filter(b => parseRating(b.rating) !== null && b.avgRating > 0);\n        if (validComparisons.length > 0) {\n            const diff = validComparisons.reduce((sum, b) => {\n                return sum + (parseRating(b.rating) - b.avgRating);\n            }, 0) / validComparisons.length;\n            stats.ratingVsGoodreads = parseFloat(diff.toFixed(2));\n\n            if (diff > 0.3) {\n                stats.ratingPersonality = \"Generous Reviewer\";\n            } else if (diff < -0.3) {\n                stats.ratingPersonality = \"Tough Critic\";\n            } else {\n                stats.ratingPersonality = \"Balanced Judge\";\n            }\n\n            // NEW: Advanced rating analysis\n            stats.ratingAnalysis = analyzeRatingBehavior(validComparisons);\n        }\n    }\n\n    // Publication year stats\n    const years = books.map(b => parsePublicationYear(b.datePublished)).filter(y => y !== null);\n\n    if (years.length > 0) {\n        stats.avgPubYear = Math.round(years.reduce((a, b) => a + b, 0) / years.length);\n        stats.oldestBookYear = Math.min(...years);\n        stats.newestBookYear = Math.max(...years);\n        stats.timeSpanYears = stats.newestBookYear - stats.oldestBookYear;\n\n        // Find oldest book\n        const oldestBook = books.find(b => parsePublicationYear(b.datePublished) === stats.oldestBookYear);\n        stats.oldestBookTitle = oldestBook?.title || 'Unknown';\n\n        // Era breakdown\n        const eras = years.map(getEra);\n        stats.favoriteEra = getMostCommon(eras);\n        stats.eraBreakdown = countOccurrences(eras);\n\n        // Time period counts\n        stats.books2020Plus = years.filter(y => y >= 2020).length;\n        stats.booksPre1900 = years.filter(y => y < 1900).length;\n        stats.booksAncient = years.filter(y => y < 500).length;\n\n        // Reading personality\n        const ancientPct = stats.booksPre1900 / years.length;\n        const recentPct = stats.books2020Plus / years.length;\n\n        if (ancientPct > 0.3) {\n            stats.readingPersonality = \"Time Traveler\";\n        } else if (recentPct > 0.7) {\n            stats.readingPersonality = \"Trend Chaser\";\n        } else {\n            stats.readingPersonality = \"Balanced Reader\";\n        }\n    }\n\n    // Author stats\n    const authors = books.map(b => b.author).filter(a => a);\n\n    if (authors.length > 0) {\n        stats.uniqueAuthors = new Set(authors).size;\n        stats.booksPerAuthor = parseFloat((authors.length / stats.uniqueAuthors).toFixed(2));\n\n        const authorCounts = countOccurrences(authors);\n        const topAuthor = Object.entries(authorCounts).sort((a, b) => b[1] - a[1])[0];\n        stats.topAuthorName = topAuthor[0];\n        stats.topAuthorCount = topAuthor[1];\n\n        if (authors.length >= 5) {\n            if (stats.booksPerAuthor >= 2.0) {\n                stats.authorLoyalty = \"Superfan\";\n            } else if (stats.booksPerAuthor < 1.2) {\n                stats.authorLoyalty = \"Explorer\";\n            } else {\n                stats.authorLoyalty = \"Balanced\";\n            }\n        }\n    }\n\n    // Genre stats\n    const genres = books.map(b => inferGenre(b.title));\n    stats.topGenre = getMostCommon(genres);\n    stats.genreBreakdown = countOccurrences(genres);\n    stats.genreDiversity = Object.keys(stats.genreBreakdown).length;\n\n    // Goodreads community average\n    const validAvgRatings = books.filter(b => b.avgRating > 0).map(b => b.avgRating);\n    if (validAvgRatings.length > 0) {\n        stats.goodreadsAvg = parseFloat((validAvgRatings.reduce((a, b) => a + b, 0) / validAvgRatings.length).toFixed(2));\n\n        if (stats.avgRating) {\n            const diff = Math.abs(stats.avgRating - stats.goodreadsAvg);\n            if (diff < 0.3) {\n                stats.tasteAlignment = \"Mainstream\";\n            } else if (stats.avgRating > stats.goodreadsAvg) {\n                stats.tasteAlignment = \"Optimist\";\n            } else {\n                stats.tasteAlignment = \"Contrarian\";\n            }\n        }\n    }\n\n    return stats;\n};\n\n// NEW: Analyze rating behavior in detail\nconst analyzeRatingBehavior = (booksWithComparisons) => {\n    const analysis = {};\n\n    // Books where user rated higher than Goodreads\n    const ratedHigher = booksWithComparisons.filter(b => {\n        const userRating = parseRating(b.rating);\n        return userRating > b.avgRating;\n    });\n\n    // Books where user rated lower than Goodreads\n    const ratedLower = booksWithComparisons.filter(b => {\n        const userRating = parseRating(b.rating);\n        return userRating < b.avgRating;\n    });\n\n    // Books rated exactly the same\n    const ratedSame = booksWithComparisons.filter(b => {\n        const userRating = parseRating(b.rating);\n        return Math.abs(userRating - b.avgRating) < 0.1;\n    });\n\n    analysis.ratedHigherCount = ratedHigher.length;\n    analysis.ratedLowerCount = ratedLower.length;\n    analysis.ratedSameCount = ratedSame.length;\n    analysis.ratedHigherPct = parseFloat((ratedHigher.length / booksWithComparisons.length * 100).toFixed(1));\n    analysis.ratedLowerPct = parseFloat((ratedLower.length / booksWithComparisons.length * 100).toFixed(1));\n\n    // Find biggest disagreements\n    const disagreements = booksWithComparisons.map(b => ({\n        title: b.title,\n        userRating: parseRating(b.rating),\n        avgRating: b.avgRating,\n        difference: parseRating(b.rating) - b.avgRating\n    }));\n\n    // Most loved (rated much higher than average)\n    const mostLoved = disagreements\n        .filter(d => d.difference > 0)\n        .sort((a, b) => b.difference - a.difference)\n        .slice(0, 3);\n\n    // Most critical (rated much lower than average)\n    const mostCritical = disagreements\n        .filter(d => d.difference < 0)\n        .sort((a, b) => a.difference - b.difference)\n        .slice(0, 3);\n\n    analysis.mostLoved = mostLoved;\n    analysis.mostCritical = mostCritical;\n\n    // Underrated gems (gave 5 stars, Goodreads average < 4.0)\n    const underratedGems = booksWithComparisons.filter(b => {\n        const userRating = parseRating(b.rating);\n        return userRating === 5 && b.avgRating < 4.0;\n    });\n\n    analysis.underratedGems = underratedGems.map(b => ({\n        title: b.title,\n        avgRating: b.avgRating\n    }));\n\n    // Overrated books (gave 1-2 stars, Goodreads average > 4.0)\n    const overratedBooks = booksWithComparisons.filter(b => {\n        const userRating = parseRating(b.rating);\n        return userRating <= 2 && b.avgRating > 4.0;\n    });\n\n    analysis.overratedBooks = overratedBooks.map(b => ({\n        title: b.title,\n        avgRating: b.avgRating,\n        userRating: parseRating(b.rating)\n    }));\n\n    // Rating consistency - standard deviation\n    const differences = disagreements.map(d => d.difference);\n    const avgDiff = differences.reduce((a, b) => a + b, 0) / differences.length;\n    const variance = differences.reduce((sum, diff) => sum + Math.pow(diff - avgDiff, 2), 0) / differences.length;\n    analysis.ratingStdDev = parseFloat(Math.sqrt(variance).toFixed(2));\n\n    // Determine consistency personality\n    if (analysis.ratingStdDev < 0.5) {\n        analysis.consistencyType = \"Predictable\";\n    } else if (analysis.ratingStdDev > 1.0) {\n        analysis.consistencyType = \"Unpredictable\";\n    } else {\n        analysis.consistencyType = \"Moderate\";\n    }\n\n    // Harsh on popular books?\n    const popularBooks = booksWithComparisons.filter(b => b.avgRating >= 4.2);\n    if (popularBooks.length > 0) {\n        const popularAvgDiff = popularBooks.reduce((sum, b) => {\n            return sum + (parseRating(b.rating) - b.avgRating);\n        }, 0) / popularBooks.length;\n        analysis.harshOnPopular = popularAvgDiff < -0.3;\n    }\n\n    // Champion of underdogs?\n    const unpopularBooks = booksWithComparisons.filter(b => b.avgRating < 3.8);\n    if (unpopularBooks.length > 0) {\n        const unpopularAvgDiff = unpopularBooks.reduce((sum, b) => {\n            return sum + (parseRating(b.rating) - b.avgRating);\n        }, 0) / unpopularBooks.length;\n        analysis.championOfUnderdogs = unpopularAvgDiff > 0.3;\n    }\n\n    return analysis;\n};\n\nconst getMostCommon = (arr) => {\n    const counts = countOccurrences(arr);\n    return Object.entries(counts).sort((a, b) => b[1] - a[1])[0]?.[0];\n};\n\nconst countOccurrences = (arr) => {\n    return arr.reduce((acc, val) => {\n        acc[val] = (acc[val] || 0) + 1;\n        return acc;\n    }, {});\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}